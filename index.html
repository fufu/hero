<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no,target-densitydpi=device-dpi">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="full-screen" content="true">
<meta name="screen-orientation" content="portrait">
<meta name="x5-fullscreen" content="true">
<meta name="360-fullscreen" content="true">
	
<title>比速度，30秒内抓神猿</title>
<meta name="description" content="比分数..."> 
<meta property="og:type" content="article" />
<meta property="og:url" content="http://i.oslook.com/hero" />
<meta property="og:title" content="无聊的时候想不想打猴子玩？ via oslook.com" />
<meta property="og:description" content="你可以把猴子想象成任何你讨厌或喜欢的人，看看30秒你能点做多少，哈哈，我30秒180下..." />
<meta property="og:image" content="http://picm.bbzhi.com/dongwubizhi/yuanhouxingxing/yuanhouxingxing_76869_m.jpg" />
<script type="text/javascript">
//
/// Download by http://www.oslook.com
//
var monkeyX,monkeyY;

var intervalId;
var game_state = 0;
var TIMER_TOTAL = 30000;
var TIMER_INTERVAL = 1000;
var timer_remain = TIMER_TOTAL;

var score =0;
var context ;
var stagesize = width;
var stageleft=0;
var stagetop=0;

function catch_monkey(ev){
    var x = ev.pageX;
    var y = ev.pageY;

 	if(game_state ==1){
	    score++;
		document.getElementById("score").innerHTML=score;
	}

}


//random move
function jump(){
   
	//draw monkey .
    monkeyX = parseInt(Math.random()*(stagesize-50));
    monkeyY = parseInt(Math.random()*(stagesize-50));
	//move
	document.getElementById("myMonkey").style.position="absolute";
	document.getElementById("myMonkey").style.left=stageleft + monkeyX + 'px';
	document.getElementById("myMonkey").style.top=stagetop + monkeyY + 'px';

	//time update
	timer_remain -= TIMER_INTERVAL;
	document.getElementById("time").style.color="blue";
	document.getElementById("time").innerHTML="00:" + timer_remain/1000;

	
	if(timer_remain <= 0)
	{
		stopclick();
	}
}


///backgrand
function bgRandom(){
	var arrColor = [
	"#ffdab9",
	"#ff4500",
	"#ffd700",
	"#7b68ee",
	"#f5deb3",
	"#ff1493"
	];

	var id = 0;
	
	id = parseInt(Math.random()*(6));
	//console.warn(id);
	document.bgColor=arrColor[id];
}


///init
function init_each(){
	bgRandom();
	//bgcolor random
	
	score=0;
    timer_remain = TIMER_TOTAL;
    game_state = 1;
    
    document.getElementById("myscore").style.fontSize="12px";
    document.getElementById("myscore").innerHTML="";
    document.getElementById("stage").style.visibility='visible';
   	var width=window.innerWidth;
   	var height=window.innerHeight;
	stagesize=width;
	if (width>height)stagesize = height;
//	console.warn("size"+stagesize);
 	document.getElementById("stage").style.width =stagesize*0.95 +'px';
 	document.getElementById("stage").style.height =stagesize*0.95 +'px';
 	document.getElementById("stage").style.border='1px solid #000';
 	
 	stageleft=document.getElementById("stage").getBoundingClientRect().left;
 	stagetop=document.getElementById("stage").getBoundingClientRect().top;

//	console.warn("left:"+stageleft +"top:"+  stagetop);

 	
}

///start button
function startclick(){
	init_each();
	
	document.getElementById("start_btn").disabled = "disabled";
	document.getElementById("stop_btn").disabled = "";
	
    //first time
    jump();
    
    intervalId = setInterval("jump()",TIMER_INTERVAL);
}

//stop button
function stopclick(){
	
	//timer clear
	clearInterval(intervalId);
	game_state=0;
	
	// button init
	document.getElementById("start_btn").disabled = "";
	document.getElementById("stop_btn").disabled = "disabled";

	//stage hidden for score
	document.getElementById("stage").style.visibility='hidden';

	document.getElementById("myscore").style.fontSize="45px";
	document.getElementById("myscore").style.color="#4d4d4d";
	document.getElementById("myscore").innerHTML="本次成绩:" + score;

	// Check browser support
	if (typeof(Storage) != "undefined") {
		if(localStorage.getItem("highscore") < score)
		{
			// Store
			localStorage.setItem("highscore", score);
		}
		// Retrieve
		document.getElementById("myscore").innerHTML += "<br>最好成绩:" + localStorage.getItem("highscore");
	}
	

}

////window starts
function windowLoad(){
        
    document.getElementById("myMonkey").onclick = catch_monkey;
   	document.getElementById("stop_btn").disabled = "";
   	document.getElementById("score").style.color="blue";
   	
   	init_each();
}

</script>
	
	
<style type="text/css">
div#header {color: blue; margin-left: 10px}
//div#stage {float:left;}
div#footer {background-color:#99bbbb;clear:both;text-align:center;}
</style>
</head>
  <body onload="windowLoad();" bgcolor="#f06060">
      <div id="header"><h3>只想不做，不如抓神猿！</h1></div>
      <a>剩余时间:</a>
      <a id="time">00:30</a>
      <a>您竟然抓了</a>
      <a id="score">0</a>
      <a>只猴子！</a>
      <table cellpadding="1">
      <tr>
      <td><input type="button" value="开始" id="start_btn" onclick="startclick();" style="background-color: #8F431B;"/></td>
      <td><input type="button" value="神猿太快，不玩了-_-!" id="stop_btn" onclick="stopclick();" style="background-color: #8F431B;"/></td> 
      </tr>
      </table>
      <p id="myscore"></p>
      <div id="stage">
          <img id="myMonkey" src="http://i.oslook.com/hero/monkey.jpg" width="50" height="50" >
      </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-391361-3', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
